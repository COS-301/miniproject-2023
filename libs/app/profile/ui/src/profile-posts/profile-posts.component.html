<br>
<ng-container *ngIf="(profile$ | async) as profile;">
  <ion-content fullscreen>
    <div style="display: flex; justify-content: center; padding-top: 40px;">
        <div style="width: 150px; height: 150px; border-radius: 50%; overflow: hidden;">
          <img style="object-fit: cover; width: 100%; height: 100%;" *ngIf="profile?.accountDetails?.photoURL; else noAvatar" (click)="showAvatarMenu()" alt="User Avatar" [src]="profile?.accountDetails?.photoURL" />
          <ng-template #noAvatar>
            <img style="object-fit: cover; width: 100%; height: 100%;" alt="User Avatar" src="assets/avatars/default.jpg" (click)="showAvatarMenu()"/>
          </ng-template>
        </div>
      </div>
      
    <div id="avatar-menu" class="popup-menu">
      <ion-label class = "avatarLabel">Select a New Avatar</ion-label>
      <ion-grid>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/1.jpg" alt="Avatar 1" class = "avatarPic" (click)="selectAvatar('1.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/2.jpg" alt="Avatar 2" class = "avatarPic" (click)="selectAvatar('2.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/3.jpg" alt="Avatar 3" class = "avatarPic" (click)="selectAvatar('3.jpg')">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/4.jpg" alt="Avatar 4" class = "avatarPic" (click)="selectAvatar('4.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/5.jpg" alt="Avatar 5" class = "avatarPic" (click)="selectAvatar('5.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/6.jpg" alt="Avatar 6" class = "avatarPic" (click)="selectAvatar('6.jpg')">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/7.jpg" alt="Avatar 7" class = "avatarPic" (click)="selectAvatar('7.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/8.jpg" alt="Avatar 8" class = "avatarPic" (click)="selectAvatar('8.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/9.jpg" alt="Avatar 9" class = "avatarPic" (click)="selectAvatar('9.jpg')">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/10.jpg" alt="Avatar 10" class = "avatarPic" (click)="selectAvatar('10.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/11.jpg" alt="Avatar 11" class = "avatarPic" (click)="selectAvatar('11.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/12.jpg" alt="Avatar 12" class = "avatarPic" (click)="selectAvatar('12.jpg')">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/13.jpg" alt="Avatar 13" class = "avatarPic" (click)="selectAvatar('13.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/14.jpg" alt="Avatar 14" class = "avatarPic" (click)="selectAvatar('14.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/15.jpg" alt="Avatar 15" class = "avatarPic" (click)="selectAvatar('15.jpg')">
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <img src="assets/avatars/16.jpg" alt="Avatar 16" class = "avatarPic" (click)="selectAvatar('16.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/17.jpg" alt="Avatar 15" class = "avatarPic" (click)="selectAvatar('17.jpg')">
          </ion-col>
          <ion-col>
            <img src="assets/avatars/18.jpg" alt="Avatar 15" class = "avatarPic" (click)="selectAvatar('18.jpg')">
          </ion-col>
        </ion-row>
      </ion-grid>
      <div class="menu-buttons">
        <ion-button color="primary" size="small" fill="solid" (click)="confirmAvatar()">Confirm</ion-button>
        <ion-button color="danger" size="small" fill="solid" (click)="cancelAvatar()">Cancel</ion-button>

      </div>
    </div>
    <ion-grid>
      <ion-row>
        <ion-col size="2"></ion-col>
        <ion-col size="8" style="text-align: center;"><ion-label class ="creatorText">{{profile?.accountDetails?.displayName}}</ion-label> </ion-col>
        <ion-col size="2"></ion-col>
      </ion-row>
      <!-- <ion-row>
    <ion-col ></ion-col>
    <ion-col size = "6"style="text-align: center;"><ion-label style="color:black;font-size: small;" >123 Followers</ion-label> </ion-col>
    <ion-col></ion-col>
  </ion-row> -->
    </ion-grid>
    <form [formGroup]="accountDetailsForm" ngxsForm="profile.accountDetailsForm" (submit)="updateAccountDetails()">
      <ion-list lines="none">
        <ion-item counter="true" style="text-align: center; padding-left: 50px; padding-right: 50px; font-size: 12px; ">

            <ion-textarea [autoGrow]="true" maxlength="150"
              style="font-size: 12px; background-color: #ffffff; padding-left:20px; padding-right: 20px; border:solid 1px rgb(53,107,89); border-radius: 20px; width:200px"
              formControlName="bio">
            </ion-textarea>


        </ion-item>

      </ion-list>
      <ion-grid>
        <ion-row>
          <ion-col size="3"></ion-col>
          <ion-col> <ion-icon (click)="showAvatarMenu()" name="create-outline"
              color="primary" size = "medium"></ion-icon></ion-col>
              <ion-col><ion-icon (click)="toSettingsPage()" name="settings-outline" color="primary"></ion-icon></ion-col>          <ion-col size="3"></ion-col>
        </ion-row>
      </ion-grid>
    </form>
    <ion-grid>
      <ion-row>

      </ion-row>
    </ion-grid>
    <!-- <ion-button
        fill="clear"
        class="ion-float-left"
        type="button"
        (click)="logout()">
        Logout
      </ion-button> -->
    <ng-container *ngIf="posts$ | async as posts">

      <div *ngFor="let post of posts" color=secondary>

        <ion-card class="postCard">
          <div color = "primary" style="height: 5%;">

          </div>
          <img class="postImage" alt="Post" [src]="post.content"/>


          <ion-card-content class = "cardAction">
            <ion-toolbar class="actionToolBar">
              <ion-list lines="none" class="actionBlock">

                <ion-grid class = "actionGrid" >

                    <ion-row >
                      <ion-col class="captionText" size="8" >
                        <ion-text lines="none"> {{ post.caption }}</ion-text>
                      </ion-col>

                      <ion-col size="4">
                        <ion-row>
                          <ion-col size="6">
                            <ion-icon class = "like" src="assets/icons/like.svg"></ion-icon>
                            <ion-text class="buttonText" lines="none"
                              height="fit-content">{{post.likes}}</ion-text> <!-- {{post.likes}} goes here -->

                          </ion-col>

                          <!--<ion-col size="4">
                            <ion-icon class = "comment" size="30px" color="primary" src="assets/icons/comments.svg"></ion-icon>
                            <ion-text *ngIf="post.comments; else noComments" class="buttonText"
                              lines="none">{{post.comments.length}}</ion-text>  number of comments goes here or to be removed -->
                           <!-- <ng-template #noComments>
                              <ion-text class="buttonText"
                              lines="none">0</ion-text>
                            </ng-template>

                          </ion-col>-->

                          <ion-col size="6">
                            <ion-icon *ngIf="post.listing; else notForSaleIcon" class = "buy" size="30px" src="assets/icons/buy.svg"></ion-icon>
                            <ion-text *ngIf="post.listing; else notForSale" class="buttonText"
                              lines="none">{{post.listing}}</ion-text>
                              <ng-template #notForSaleIcon>
                                <ion-icon class = "noSaleBuy" size="30px" src="assets/icons/buy.svg"></ion-icon>

                              </ng-template>
                              <ng-template #notForSale>
                              <ion-text class="buttonTextNoSale"
                                lines="none">-</ion-text>
                            </ng-template>
                          </ion-col>
                        </ion-row>

                        <ion-row style="margin-top: -13px;">
                          <ion-col>
                            <ion-badge *ngIf="post.hashtag"
                              (click)="toSearch(post.hashtag)"
                              style="--background: var(--{{ getSlicedHashtag(post.hashtag) }});">{{post.hashtag}}</ion-badge>
                          </ion-col>
                        </ion-row>

                      </ion-col>
                    </ion-row>



                </ion-grid>
              </ion-list>


            </ion-toolbar>
          </ion-card-content>
        </ion-card>

       <!--  <img class="postImage" alt="Post" [src]="post.content" />
        <ion-toolbar color="secondary" class="actionToolBar">
          <ion-list lines="none" class="actionBlock">

            <ion-grid class = "actionGrid">

                <ion-row>
                  <ion-col class="captionText" size="6">
                    <ion-text lines="none"> {{ post.caption }}</ion-text>
                  </ion-col>

                  <ion-col size="6">
                    <ion-row>
                      <ion-col size="4">
                        <ion-icon class = "like" src="assets/icons/like.svg"></ion-icon>
                        <ion-text class="buttonText" lines="none"
                          height="fit-content">0</ion-text> {{post.likes}} goes here

                      </ion-col>

                      <ion-col size="4">
                        <ion-icon class = "comment" size="30px" color="primary" src="assets/icons/comments.svg"></ion-icon>
                        <ion-text *ngIf="post.comments; else noComments" class="buttonText"
                          lines="none">{{post.comments.length}}</ion-text>number of comments goes here or to be removed
                        <ng-template #noComments>
                          <ion-text class="buttonText"
                          lines="none">0</ion-text>
                        </ng-template>

                      </ion-col>

                      <ion-col size="4">
                        <ion-icon *ngIf="post.listing; else notForSaleIcon" class = "buy" size="30px" src="assets/icons/buy.svg"></ion-icon>
                        <ion-text *ngIf="post.listing; else notForSale" class="buttonText"
                          lines="none">{{post.listing}} min</ion-text>
                          <ng-template #notForSaleIcon>
                            <ion-icon class = "noSaleBuy" size="30px" src="assets/icons/buy.svg"></ion-icon>

                          </ng-template>
                          <ng-template #notForSale>
                          <ion-text class="buttonTextNoSale"
                            lines="none">-</ion-text>
                        </ng-template>
                      </ion-col>
                    </ion-row>

                    <ion-row style = "margin-top: -13px;">
                      <ion-col>
                        <ion-badge *ngIf="post.hashtag"
                          style="--background: var(--{{ getSlicedHashtag(post.hashtag) }});">{{post.hashtag}}</ion-badge>
                      </ion-col>
                    </ion-row>

                  </ion-col>
                </ion-row>


                <ion-col size = "2"> <ion-item  style="font-size: 15px;">  {{ post.hashtag }}</ion-item></ion-col>
            <ion-col size = "2"><ion-item  style="font-size: 15px;"> {{ post.likes }} Likes</ion-item></ion-col>
            <ion-col size = "2"><ion-item  style="font-size: 15px;"> Price: {{post.listing}}</ion-item></ion-col>
            </ion-grid>
          </ion-list>

          <ion-buttons slot="end">

            <ion-button expand="block" color="primary" (click)="like()">
          <ion-icon name="thumbs-up-outline"></ion-icon>
        </ion-button>

        <ion-button expand="block" color="primary" (click)="comment()">
          <ion-icon name="chatbox-ellipses-outline"></ion-icon>
        </ion-button>

        <ion-button expand="block" color="primary" (click)="bid()">
          <ion-icon name="cart-outline"></ion-icon>
        </ion-button>

          </ion-buttons>
        </ion-toolbar>
        <hr>-->
      </div>

      <!-- <div *ngFor="let post of posts" style="text-align: center;">
    <img [src]="post.content" alt="Post image" width="80%"   style="position:relative; border-radius: 25%;object-fit: cover;
    width: 300px;
    height: 300px;" />
    <p>{{ post.caption }}</p>
    <p>Hashtag: {{ post.hashtag }}</p>
    <p>Likes: {{ post.likes }}</p>
    <p>Listing: {{post.listing}}</p>
  </div> -->
    </ng-container>
  </ion-content>
</ng-container>
