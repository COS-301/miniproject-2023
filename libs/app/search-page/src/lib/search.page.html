<ion-header color="none" >
    <ion-toolbar color="none" [ngClass]="'menu-toolbar'">
        <ion-title ngClass="title">Memory Lane</ion-title>
        <small slot="end" ngClass="account-time">22h:52m:11s</small>
    </ion-toolbar>
</ion-header>

<ion-content color="dark">
    <ion-toolbar color="none">
        <ion-searchbar
            color="medium" 
            ngClass="searchbar"
            [(ngModel)]="searchValue"
            (ionFocus)="onSearchFocus()"
            (ionBlur)="onSearchBlur()"
            (ionChange)="onInputChange()"
            show-cancel-button="focus"
            (keyup.enter)="onSearch(searchValue)"
        ></ion-searchbar>
    </ion-toolbar>
    <ion-list ngClass="memory-list" *ngIf="!searchFocus && !searchValue">
        <ion-text ngClass="popular-memories-text">Most Popular Memories</ion-text>
        <div *ngIf="!showExpandedView">
            <ion-card 
                ngClass="memory-card" 
                color="none" 
                *ngFor="let memory of Memories"
            > 
                <img ngClass="memory-img" style="background-image: url('{{ memory.imgUrl }}');" />             
                <ion-card-header>
                    <div class="memory-avatar-username">
                        <ion-avatar slot="start">
                            <img src="{{ memory.profileUrl }}" ngClass="memory-card-profileImage" routerLink="/user-view"/>
                        </ion-avatar>
                        <ion-card-title ngClass="memory-card-username" routerLink="/user-view">{{ memory.username }}</ion-card-title>
                        <ion-text ngClass="memory-card-time-ago">{{ calculateHowLongAgo(memory.timePosted) }}</ion-text>
                    </div>
                </ion-card-header>
                <ion-card-content>
                    <ion-card-title ngClass="memory-card-title">{{ memory.title }}</ion-card-title>
                    <p ngClass="memory-card-desc">{{ memory.description }}</p>
                    <ion-text class="ion-padding-top" ngClass="memory-date">{{ convertTimePostedToDate(memory.timePosted) }}</ion-text>
                    <ion-text ngClass="memory-show-more">{{ !showExpandedView ? 'Show More' : 'Show Less' }}</ion-text>
                </ion-card-content>
            </ion-card>
            <ion-card
                ngClass="memory-card-expanded" 
                color="none" 
                *ngFor="let memory of Memories"
            >
                <ion-card-header>
                    <div class="memory-avatar-username-expanded">
                        <ion-avatar slot="start">
                            <img src="{{ memory.profileUrl }}" ngClass="memory-card-profileImage-expanded" routerLink="/user-view"/>
                        </ion-avatar>
                        <ion-card-title ngClass="memory-card-username-expanded" routerLink="/user-view">{{ memory.username }}</ion-card-title>
                        <ion-text ngClass="memory-card-time-ago-expanded">{{ calculateHowLongAgo(memory.timePosted) }}</ion-text>
                    </div>
                </ion-card-header>
                <ion-content color="none" scroll-y="false">                    
                    <ion-img ngClass="memory-img-expanded" src="{{ memory.imgUrl }}"></ion-img>
                    <p ngClass="memory-card-desc-expanded">{{ memory.description }}</p>
                    <div class="commentIcon-viewAll">
                        <div class="memory-comment-and-icon">
                            <ion-icon ngClass="memory-comment-icon" name="chatbox-outline"></ion-icon>
                            <ion-label ngClass="memory-comment-text">Comment</ion-label>
                        </div>
                        <ion-text ngClass="comment-viewAll">View all comments <b>5000</b></ion-text>
                    </div>
                    <div ngClass="comment-profileImg-username">
                        <ion-avatar ngClass="memory-avatar-expanded">
                            <img src="{{ memory.profileUrl }}" ngClass="memory-comment-profileImg" routerLink="/user-view"/>
                        </ion-avatar>
                        <div ngClass="memory-username-and-comment">
                            <ion-text ngClass="memory-comment-username" routerLink="/user-view">{{ memory.username }}</ion-text>
                            <ion-text ngClass="memory-comment-usercomment">Wow bro this post looks AMAZING!! jskdcn jks skjdnkcjsdcn</ion-text>
                        </div>
                    </div>
                    <ion-text ngClass="memory-show-more">{{ !showExpandedView ? 'Show Less' : 'Show More' }}</ion-text>
                </ion-content>
            </ion-card>
        </div>
    </ion-list>
    <!-- Show list of recent searches -->
    <ion-text *ngIf="searchFocus && !searchValue" size="medium">
        Recent
    </ion-text>
    <ion-list 
        *ngIf="searchFocus && !searchValue"
        ngClass="search-list">
        <ion-item 
            color="none" 
            *ngFor="let search of RecentSearches | slice:0:7"
            ngClass="search-item"
            (click)="chosenRecentSearch($event, search)"
        >
            <ion-text>{{search}}</ion-text>
        </ion-item>
    </ion-list>
    <ion-list 
        *ngIf="searchValue"
        ngClass="search-list"
        >
        <!-- Change ion-item to user-view component; this way we can send the inputs of the search result down to the user-view component -->
        <ion-item
            color="none" 
            *ngFor="let result of SearchResults"
            ngClass="search-item"
            routerLink="/user-view"
        >
            <ion-text>{{result}}</ion-text>
        </ion-item>
        <ion-item 
            color="none"
            ngClass="no-results"
            *ngIf="!tempSearchResults.length"
            lines="none"
            routerLink="/user-view"
        >
            <ion-icon class="ion-padding-right" color="danger" slot="start" name="alert-circle-outline"></ion-icon>
            <ion-text color="medium">No Results</ion-text>
        </ion-item>
    </ion-list>
</ion-content>
