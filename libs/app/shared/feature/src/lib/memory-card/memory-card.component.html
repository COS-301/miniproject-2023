<ion-card [ngClass]="{ 'memory-card': !showExpandedView, 'memory-card-expanded': showExpandedView }" color="none">
  <img *ngIf="!showExpandedView" ngClass="memory-img" style="background-image: url('{{ memory.imgUrl }}');" />
  <ion-card-header>
    <div
      [ngClass]="{ 'memory-avatar-username': !showExpandedView, 'memory-avatar-username-expanded': showExpandedView }"
    >
      <ion-avatar slot="start">
        <img
          src="{{ memory.profileUrl }}"
          [ngClass]="{
            'memory-card-profileImage': !showExpandedView,
            'memory-card-profileImage-expanded': showExpandedView
          }"
          (click)="openUserProfile()"
        />
      </ion-avatar>
      <ion-card-title
        [ngClass]="{ 'memory-card-username': !showExpandedView, 'memory-card-username-expanded': showExpandedView }"
        (click)="openUserProfile()"
        >{{ memory.username }}</ion-card-title
      >
      <ion-text
        [ngClass]="{ 'memory-card-time-ago': !showExpandedView, 'memory-card-time-ago-expanded': showExpandedView }"
        >{{ calculateHowLongAgo(memory.timePosted) }}</ion-text
      >
    </div>
  </ion-card-header>
  <ion-card-content scroll-y="false" [ngClass]="{ 'ion-card-content-expanded': showExpandedView }">
    <ion-card-title *ngIf="!showExpandedView" ngClass="memory-card-title">{{ memory.title }}</ion-card-title>
    <ion-img *ngIf="showExpandedView" ngClass="memory-img-expanded" src="{{ memory.imgUrl }}"></ion-img>
    <p [ngClass]="{ 'memory-card-desc': !showExpandedView, 'memory-card-desc-expanded': showExpandedView }">
      {{ memory.description }}
    </p>
    <ion-text *ngIf="!showExpandedView" class="ion-padding-top" ngClass="memory-date">{{
      convertTimePostedToDate(memory.timePosted)
    }}</ion-text>
    <div *ngIf="showExpandedView" class="commentIcon-viewAll">
      <div class="memory-comment-and-icon">
        <ion-icon ngClass="memory-comment-icon" name="chatbox-outline"></ion-icon>
        <ion-label ngClass="memory-comment-text">Comment</ion-label>
      </div>
      <ion-text ngClass="comment-viewAll">View all comments <b>{{ memory.comments.length }}</b></ion-text>
    </div>
    <div *ngIf="showExpandedView" ngClass="comment-profileImg-username">
      <ion-avatar ngClass="memory-avatar-expanded">
        <img src="{{ memory.comments[0]?.profileImgUrl }}" ngClass="memory-comment-profileImg" routerLink="/user-view" />
      </ion-avatar>
      <div ngClass="memory-username-and-comment">
        <ion-text ngClass="memory-comment-username" routerLink="/user-view">{{ memory.comments[0]?.username }}</ion-text>
        <ion-text ngClass="memory-comment-usercomment">{{ memory.comments[0]?.comment }}</ion-text>
      </div>
    </div>
    <ion-text (click)="changeMemoryView()" ngClass="memory-show-more">{{
      !showExpandedView ? 'Show More' : 'Show Less'
    }}</ion-text>
  </ion-card-content>
</ion-card>
